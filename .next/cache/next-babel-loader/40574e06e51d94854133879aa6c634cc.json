{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\farha\\\\Desktop\\\\reacttest\\\\components\\\\Product\\\\AddProductToCart.js\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { Input } from \"semantic-ui-react\";\nimport { useRouter } from 'next/router';\nimport axios from 'axios';\nimport baseUrl from '../../utils/baseUrl';\nimport cookie from 'js-cookie';\nimport catchErrors from '../../utils/catchErrors';\n\nfunction AddProductToCart({\n  user,\n  productId\n}) {\n  const [quantity, setQuantity] = React.useState(1);\n  const [loading, setLoading] = React.useState(false);\n  const [success, setSuccess] = React.useState(false);\n  const router = useRouter();\n  React.useEffect(() => {\n    let timeout;\n\n    if (success) {\n      setTimeout(() => setSuccess(false), 2000);\n    }\n\n    return () => {\n      clearTimeout(timeout);\n    };\n  }, [success]);\n\n  async function handleAddProductToCart() {\n    try {\n      setLoading(true);\n      const url = `${baseUrl}/api/cart`;\n      const payload = {\n        quantity,\n        productId\n      };\n      const token = cookie.get('token');\n      const headers = {\n        headers: {\n          Authorization: token\n        }\n      };\n      await axios.put(url, payload, headers);\n      setSuccess(true);\n    } catch (error) {\n      catchErrors(error, window.alert);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return __jsx(Input, {\n    type: \"number\",\n    min: \"1\",\n    placeholder: \"Quantity\",\n    onChange: event => setQuantity(Number(event.target.value)),\n    value: quantity,\n    action: user && success ? {\n      color: 'blue',\n      content: 'Item Added',\n      icon: 'plus cart',\n      disabled: true\n    } : user ? {\n      color: \"orange\",\n      content: \"Add to Cart\",\n      icon: \"plus cart\",\n      loading,\n      disabled: loading,\n      onClick: handleAddProductToCart\n    } : {\n      color: 'blue',\n      content: 'Sign Up tp Purchase',\n      icon: \"signup\",\n      onClick: () => router.piush('/signup')\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  });\n}\n\nexport default AddProductToCart;","map":{"version":3,"sources":["C:\\Users\\farha\\Desktop\\reacttest\\components\\Product\\AddProductToCart.js"],"names":["React","Input","useRouter","axios","baseUrl","cookie","catchErrors","AddProductToCart","user","productId","quantity","setQuantity","useState","loading","setLoading","success","setSuccess","router","useEffect","timeout","setTimeout","clearTimeout","handleAddProductToCart","url","payload","token","get","headers","Authorization","put","error","window","alert","event","Number","target","value","color","content","icon","disabled","onClick","piush"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Input } from \"semantic-ui-react\";\nimport {useRouter} from 'next/router';\nimport axios from 'axios';\nimport baseUrl from '../../utils/baseUrl';\nimport cookie from 'js-cookie';\nimport catchErrors from '../../utils/catchErrors';\n\nfunction AddProductToCart({ user , productId}) {\n  const [quantity, setQuantity] = React.useState(1);\n  const [loading, setLoading] = React.useState(false);\n  const [success , setSuccess] = React.useState(false);\n  const router = useRouter();\n\n  React.useEffect(() => {\n    let timeout ;\n    if( success) {\n      setTimeout(() => setSuccess(false), 2000)\n    }\n    return () => {\n      clearTimeout(timeout);\n    };\n    \n  }, [success])\n\n async function handleAddProductToCart(){\n\n  try{\n    setLoading(true);\n    const url = `${baseUrl}/api/cart`;\n    const payload = { quantity, productId };\n    const token = cookie.get('token');\n    const headers = { headers : { Authorization: token }}\n    await axios.put(url, payload, headers)\n    setSuccess(true);\n  }catch(error){\n    catchErrors(error, window.alert)\n  }finally{\n    setLoading(false);\n  }\n    \n }\n\n  return (\n    <Input\n      type=\"number\"\n      min=\"1\"\n      placeholder=\"Quantity\"\n      onChange={event => setQuantity(Number(event.target.value))}\n      value={quantity }\n      action={ \n        user && success ? {\n          color: 'blue',\n          content: 'Item Added',\n          icon: 'plus cart',\n          disabled: true\n        } : \n        user ? {\n        color: \"orange\",\n        content: \"Add to Cart\",\n        icon: \"plus cart\",\n        loading,\n        disabled: loading,\n        onClick : handleAddProductToCart\n      } : {\n        color: 'blue',\n        content: 'Sign Up tp Purchase',\n        icon: \"signup\",\n        onClick: () => router.piush('/signup')\n      }}\n    />\n  );\n}\n\nexport default AddProductToCart;\n"]},"metadata":{},"sourceType":"module"}