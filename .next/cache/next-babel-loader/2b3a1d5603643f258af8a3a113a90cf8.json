{"ast":null,"code":"// import products from \"../../static/products.json\";\nimport Product from \"../../models/Product\";\nimport connectDb from \"../../utils/connectDb\";\nconnectDb();\nexport default (async (req, res) => {\n  const {\n    page,\n    size\n  } = req.query;\n  const pageNum = Number(page);\n  const pageSize = Number(size);\n  let products = [];\n  const totalDocs = await Product.countDocuments();\n  const totalPages = Math.ceil(totalDocs / pageSize);\n\n  if (pageNum === 1) {\n    products = await Product.find().sort({\n      name: \"asc\"\n    }).limit(pageSize);\n  } else {\n    const skips = pageSize * (pageNum - 1);\n    products = await Product.find().sort({\n      name: \"asc\"\n    }).skip(skips).limit(pageSize);\n  } // const products = await Product.find();\n\n\n  res.status(200).json({\n    products,\n    totalPages\n  });\n});","map":{"version":3,"sources":["C:\\Users\\farha\\Desktop\\reacttest\\pages\\api\\products.js"],"names":["Product","connectDb","req","res","page","size","query","pageNum","Number","pageSize","products","totalDocs","countDocuments","totalPages","Math","ceil","find","sort","name","limit","skips","skip","status","json"],"mappings":"AAAA;AACA,OAAOA,OAAP,MAAoB,sBAApB;AACA,OAAOC,SAAP,MAAsB,uBAAtB;AAEAA,SAAS;AAET,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACjC,QAAM;AAAEC,IAAAA,IAAF;AAASC,IAAAA;AAAT,MAAkBH,GAAG,CAACI,KAA5B;AAEA,QAAMC,OAAO,GAAGC,MAAM,CAAEJ,IAAF,CAAtB;AACA,QAAMK,QAAQ,GAAGD,MAAM,CAACH,IAAD,CAAvB;AACA,MAAIK,QAAQ,GAAG,EAAf;AACA,QAAMC,SAAS,GAAG,MAAMX,OAAO,CAACY,cAAR,EAAxB;AACA,QAAMC,UAAU,GAAGC,IAAI,CAACC,IAAL,CAAUJ,SAAS,GAAGF,QAAtB,CAAnB;;AACA,MAAKF,OAAO,KAAK,CAAjB,EAAoB;AACpBG,IAAAA,QAAQ,GAAI,MAAMV,OAAO,CAACgB,IAAR,GAAeC,IAAf,CAAoB;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAApB,EAAoCC,KAApC,CAA0CV,QAA1C,CAAlB;AACC,GAFD,MAEM;AACL,UAAMW,KAAK,GAAIX,QAAQ,IAAIF,OAAO,GAAG,CAAd,CAAvB;AACAG,IAAAA,QAAQ,GAAG,MAAMV,OAAO,CAACgB,IAAR,GAAeC,IAAf,CAAoB;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAApB,EAAoCG,IAApC,CAAyCD,KAAzC,EAAgDD,KAAhD,CAAsDV,QAAtD,CAAjB;AACA,GAbgC,CAcjC;;;AACAN,EAAAA,GAAG,CAACmB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACb,IAAAA,QAAD;AAAWG,IAAAA;AAAX,GAArB;AACD,CAhBD","sourcesContent":["// import products from \"../../static/products.json\";\nimport Product from \"../../models/Product\";\nimport connectDb from \"../../utils/connectDb\";\n\nconnectDb();\n\nexport default async (req, res) => {\n  const { page , size } = req.query;\n\n  const pageNum = Number( page );\n  const pageSize = Number(size);\n  let products = [];\n  const totalDocs = await Product.countDocuments();\n  const totalPages = Math.ceil(totalDocs / pageSize);\n  if ( pageNum === 1) {\n  products =  await Product.find().sort({ name: \"asc\"}).limit(pageSize);\n  }else {\n   const skips =  pageSize * (pageNum - 1);\n   products = await Product.find().sort({ name: \"asc\"}).skip(skips).limit(pageSize);\n  }\n  // const products = await Product.find();\n  res.status(200).json({products, totalPages});\n};\n"]},"metadata":{},"sourceType":"module"}